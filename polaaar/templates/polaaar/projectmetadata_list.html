{% extends "polaaar/base.html" %}
{% load static humanize url_replace %}

{% block title %}
    Dataset search
{% endblock title %}


{% block body_class %}{% endblock %}

{% block content %}
    <div class="container mt-4">
        <form action="." method="get"
              class="form-inline d-flex justify-content-center md-form form-sm mt-0">
            <i class="fas fa-search" aria-hidden="true"></i>
            {{ form }}
        </form>

        {% if page_obj.object_list %}
            <p>{{ page_obj.start_index }} - {{ page_obj.end_index }} of {{ page_obj.paginator.count|intcomma }}
                results</p>
            {% if is_paginated %}
                <nav>
                    <ul class="pagination">
                        {% if page_obj.has_previous %}
                            <li>
                                <a class="btn btn-sm btn-biodiversity-lightblue" type="button"
                                   href="?{% url_replace page=page_obj.previous_page_number %}">Previous</a>
                            </li>
                        {% endif %}
                        {% if page_obj.has_next %}
                            <li>
                                <a class="btn btn-sm btn-biodiversity-lightblue" type="button"
                                   href="?{% url_replace page=page_obj.next_page_number %}">Next</a>
                            </li>
                        {% endif %}

                    </ul>
                </nav>

            {% endif %}
            {% for project in object_list %}
                <a href="{% url 'polaaar:project_metadata_detail' project.pk %}" style="color:#0099CC"><h5
                        class="mt-4">{{ project.project_name }}</h5></a>
                {% if project.start_date %}
                    <span class="fas fa-calendar mr-1" style="color: #0099CC;"></span>
                    {{ project.start_date|date:'Y-m-d' }}{% if project.end_date %} to
                        {{ project.end_date|date:'Y-m-d' }}{% endif %}
                {% endif %}
                <p>{{ project.abstract }}</p>
            {% endfor %}
            <div class="row">
                <div class="col-4 col-lg-3">
                    <a class="btn btn-biodiversity-lightblue btn-lg" style="width:100%"
                       href="{% url 'polaaar:export_projects' %}?id={{ id_list }}">Download EXCEL <i
                            class="fas fa-file-excel pl-1"></i></a>
                </div>
                <div class="col-4 col-lg-4">
                    <a class="btn btn-biodiversity-lightblue btn-lg" style="width:100%"
                       href="{% url 'polaaar:projectmetadata-list' %}?id__in={{ id_list }}">Download JSON <i
                            class="fas fa-file-code pl-1"></i></a>
                </div>
            </div>
        {% else %}
            <p>Sorry, no results.</p>
        {% endif %}


    </div>

{% endblock %}